<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

</head>
<body>
	<iframe id='theFrame' height='300px' width='600px' src='http://cs.nyu.edu/webapps/courses/' sandbox="allow-same-origin allow-scripts"></iframe>

	<br><hr><br>
	<button onclick='iFrameContent()'>iframe ==> dom</button>
	<button onclick='generateCanvas()'>dom ==> canvas</button>
	<button onclick='generateImage()'>canvas ==> image</button>
	

	<br><hr>
	<h1>Original Div</h1>
	<div id='origin-div'>
		
		<div style='background-color:red' id='captured'>
			<p>blah</p>
			<p>blah</p>
			<p>blah</p>
		</div>
 	</div>

	<br><hr>
	<h1>Canvas Div</h1>
	<div id='canvas-div'>
	</div>

	<br><hr>
	<h1>Image Div</h1>
	<div id='image-div'>
	</div>



	<script src='html2canvas.js' type='text/javascript'></script>
	<script type='text/javascript'>
		var psg = document.getElementById('captured');
		var imgdiv = document.getElementById('image-div');
		var canvasdiv = document.getElementById('canvas-div');



		function generateCanvas() {
			html2canvas(psg,{
				onrendered:function(canvas){
					canvasdiv.appendChild(canvas);
				}
			});
		}

		function generateImage () {
			var thecanvas = document.getElementsByTagName('canvas')[0];
			console.log(thecanvas);	
			var img = thecanvas.toDataURL("image/png");
			console.log(img);
			imgdiv.innerHTML='<img src="'+img+'"/>';
		}

		function iFrameContent() {
			var x = document.getElementById("theFrame");
			var y = (x.contentWindow || x.contentDocument);
			if (y.document)y = y.document;
			console.log(y);
		}
		
		

	</script>
</body>
</html>